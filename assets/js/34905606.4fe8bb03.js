"use strict";(self.webpackChunkearthnut_doc_of_docusaurus=self.webpackChunkearthnut_doc_of_docusaurus||[]).push([[7778],{8180:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"qqi/dev","title":"qqi\uff1a\u7b80\u5355\u7684\u6d4b\u8bd5\uff08@qqi/dev\uff09 - npm","description":"\u4f7f\u7528 node:test \u7684\u65f6\u5019\uff0c\u5fc3\u60f3\u8fd9\u4e0d\u7b80\u5355\u4e48\uff0c\u5c31\u662f\u4e00\u4e2a\u51fd\u6570\u3002\u4f46\u5199\u8d77\u6765\u597d\u50cf\u4e0d\u662f\u90a3\u4e2a\u56de\u4e8b\uff0c\u6682\u6ca1\u6709\u89e3\u51b3\u5b50\u6a21\u5757\u4e4b\u95f4\u7684\u5f02\u6b65\u6267\u884c\u95ee\u9898","source":"@site/npm/qqi/dev.mdx","sourceDirName":"qqi","slug":"/qqi/dev","permalink":"/npm/qqi/dev","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"qqi\uff1a\u7b80\u5355\u7684\u6d4b\u8bd5\uff08@qqi/dev\uff09 - npm","sidebar_label":"\u7b80\u5355\u7684\u6d4b\u8bd5\uff08dev\uff09","hide_title":true},"sidebar":"BpyHRv4hwAZXs48D","previous":{"title":"\u7ec8\u7aef\u590d\u5236\u6587\u672c\u5230\u526a\u5207\u677f\uff08@qqi/copy-text\uff09","permalink":"/npm/qqi/copy-text"},"next":{"title":"\u4e00\u4e2a\u7b80\u5355\u7684\u542f\u52a8\u5de5\u5177\uff08hhf\uff09","permalink":"/npm/hhf-hot"}}');var r=o(7259),s=o(9087);const i={title:"qqi\uff1a\u7b80\u5355\u7684\u6d4b\u8bd5\uff08@qqi/dev\uff09 - npm",sidebar_label:"\u7b80\u5355\u7684\u6d4b\u8bd5\uff08dev\uff09",hide_title:!0},l="\u7b80\u5355\u7684\u6d4b\u8bd5\uff08\u5c1a\u672a\u5b8c\u5584\u7248\u672c\uff09",c={},d=[{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:2},{value:"\u4f7f\u7528",id:"\u4f7f\u7528",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components},{InstallInfo:o,PackageInfo:t}=n;return o||p("InstallInfo",!0),t||p("PackageInfo",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"\u7b80\u5355\u7684\u6d4b\u8bd5\u5c1a\u672a\u5b8c\u5584\u7248\u672c",children:"\u7b80\u5355\u7684\u6d4b\u8bd5\uff08\u5c1a\u672a\u5b8c\u5584\u7248\u672c\uff09"})}),"\n",(0,r.jsx)(t,{packageName:"@qqi/dev",githubRepoName:"qqi"}),"\n",(0,r.jsxs)(n.p,{children:["\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"node:test"})," \u7684\u65f6\u5019\uff0c\u5fc3\u60f3\u8fd9\u4e0d\u7b80\u5355\u4e48\uff0c\u5c31\u662f\u4e00\u4e2a\u51fd\u6570\u3002\u4f46\u5199\u8d77\u6765\u597d\u50cf\u4e0d\u662f\u90a3\u4e2a\u56de\u4e8b\uff0c\u6682\u6ca1\u6709\u89e3\u51b3\u5b50\u6a21\u5757\u4e4b\u95f4\u7684\u5f02\u6b65\u6267\u884c\u95ee\u9898"]}),"\n",(0,r.jsx)(n.h2,{id:"\u5b89\u88c5",children:"\u5b89\u88c5"}),"\n",(0,r.jsx)(o,{name:"@qqi/dev",dev:!0}),"\n",(0,r.jsx)(n.h2,{id:"\u4f7f\u7528",children:"\u4f7f\u7528"}),"\n",(0,r.jsxs)(n.p,{children:["\u5728\u5355\u5143\u6d4b\u8bd5\u7684\u65f6\u5019\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"jest"})," \uff0c\u5728\u529f\u80fd\u6d4b\u8bd5\u65f6\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"node:test"})," \u548c ",(0,r.jsx)(n.code,{children:"node:assert"}),"\u3002\u4f46\u662f\u6d4b\u8bd5\u7684\u65f6\u5019\uff0c\u603b\u662f\u6709\u6253\u5370\u7684\u6d88\u606f\u88ab ",(0,r.jsx)(n.code,{children:"node:test"})," \u7684\u7ed3\u679c\u8986\u76d6\u3002\u6240\u4ee5\uff0c\u5199\u4e86\u4e00\u4e2a\u7b80\u4ecb\u7684 dev \uff0c\u7528\u4e8e\u529f\u80fd\u6d4b\u8bd5\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:["\u7c7b\u4f3c\u4e8e ",(0,r.jsx)(n.code,{children:"node:test"}),"\uff0c\u4f7f\u7528\u5982\u4e0b\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { dev } from '@qqi/dev-log';\n\nconst log = console.log;\n\ndev.beforeEach(() => {\n  console.log('\u4f60\u4eec\u6267\u884c\u524d\u9700\u8981\u5148\u6267\u884c\u6211');\n});\n\ndev.afterEach(() => {\n  console.log('\u4f60\u4eec\u6267\u884c\u5b8c\u540e\u4f1a\u6267\u884c\u6211');\n});\n\n// \u7b80\u5355\u4f7f\u7528\ndev('\u6d4b\u8bd5 1', () => {\n  log(1);\n});\n\n// \u6211\u5176\u5b9e\u5c31\u662f\u60f3\u80fd\u591f\u8df3\u8fc7\u6d4b\u8bd5\u800c\u4e0d\u662f\u6bcf\u4e00\u6b21 ((skip)=>{ if(skip) return; ....})(false)\ndev.skip('\u8df3\u8fc7\u7684\u6d4b\u8bd5', () => {\n  log('\u6211\u5e76\u4e0d\u4f1a\u88ab\u6253\u5370\u51fa\u6765');\n});\n\n// \u5b50\u6d4b\u8bd5\uff0c\u6bcf\u4e00\u4e2a\u6d4b\u8bd5\u662f\u72ec\u7acb\u7684\uff0c\u7c7b\u4f3c\u4e8e jest\uff0c\u5355\u72ec\u7684\u6d4b\u8bd5\u6a21\u5757\u51fa\u73b0 Error \u5c06\u963b\u6b62\u5269\u4f59\u903b\u8f91\u6267\u884c\ndev('\u5305\u542b\u5b50\u9879\u7684\u6d4b\u8bd5', it => {\n  it.before(() => {\n    console.log('\u6211\u662f\u5927\u54e5\uff0c\u6211\u5148\u6267\u884c\uff0c\u4e14\u4ec5\u6267\u884c\u4e00\u6b21');\n  });\n  it.before(() => {\n    console.log('\u6211\u662f\u4e8c\u54e5\uff0c\u6211\u6267\u884c\u6b21\u4e8e\u5927\u54e5\uff0c\u4e14\u4ec5\u6267\u884c\u4e00\u6b21');\n  });\n\n  it.after(() => {\n    console.log('\u6211\u662f\u5c0f\u5f1f\uff0c\u4f60\u4eec\u6267\u884c\u5b8c\u518d\u6267\u884c\u6211\u5c31\u884c\uff0c\u4ec5\u6267\u884c\u4e00\u6b21');\n  });\n\n  it.beforeEach(() => {\n    console.log('\u6211\u662f\u4e09\u54e5\uff0c\u6211\u6267\u884c\u6b21\u4e8e\u4e8c\u54e5\uff0c\u6bcf\u6b21\u5b50\u9879\u6267\u884c\u6211\u90fd\u6267\u884c\u4e00\u6b21');\n  });\n\n  it.beforeEach(() => {\n    console.log('\u6211\u662f\u4e8c\u5f1f\uff0c\u6211\u6267\u884c\u65e9\u4e8e\u5c0f\u5f1f\uff0c\u6bcf\u6b21\u5b50\u9879\u6267\u884c\u6211\u90fd\u6267\u884c\u4e00\u6b21');\n  });\n\n  it('\u5b50\u9879 1\ufe0f\u20e3', () => {\n    log('\u6211\u8981\u51fa\u9519');\n    throw new Error('\u6211\u7c97\u9519\u4e86');\n    log('\u5b8c\u5566\uff0c\u6211\u6253\u5370\u4e0d\u51fa\u6765\u4e86');\n  });\n\n  it('\u5b50\u9879 2\ufe0f\u20e3', () => {\n    log('\u6ca1\u60f3\u5230\u5427\uff0c\u6211\u8fd8\u6d3b\u7740');\n  });\n});\n\n// \u53ef\u4ee5\u5f02\u6b65\u6267\u884c\nawait dev('\u6d4b\u8bd5\u5f02\u6b65\u7684\u4ee3\u7801', async it => {\n  it('\u6d4b\u8bd5\u5f02\u4ee3\u7801 2\ufe0f\u20e3 ', async () => {\n    log('\u5f02\u6b65\u4ee3\u7801 2\ufe0f\u20e3 \u5916\u90e8');\n    return new Promise(resolve => {\n      log('\u5f02\u6b65\u4ee3\u7801 2\ufe0f\u20e3 \u5185\u90e8');\n      setTimeout(() => {\n        log('\u5f02\u6b65\u4ee3\u7801 2\ufe0f\u20e3');\n        resolve('\u5f02\u6b65\u4ee3\u7801 2\ufe0f\u20e3');\n      }, 500);\n    });\n  });\n\n  await it<string>('\u6d4b\u8bd5\u5f02\u4ee3\u7801 1\ufe0f\u20e3 ', async () => {\n    log('\u5f02\u6b65\u4ee3\u7801 1\ufe0f\u20e3 \u5916\u90e8');\n    return new Promise(resolve => {\n      log('\u5f02\u6b65\u4ee3\u7801 1\ufe0f\u20e3 \u5185\u90e8');\n      setTimeout(() => {\n        log('\u5f02\u6b65\u4ee3\u7801 1\ufe0f\u20e3');\n\n        resolve('\u5f02\u6b65\u4ee3\u7801 1\ufe0f\u20e3');\n      }, 1000);\n    });\n  });\n});\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u5728\u4f7f\u7528\u5f02\u6b65\u7684\u6d4b\u8bd5\u65f6\uff0c\u603b\u662f\u671f\u5f85\u80fd\u591f\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"await"})," \uff0c\u5426\u8005\u53ef\u80fd\u5c06\u6536\u5230 ",(0,r.jsx)(n.code,{children:"TypeError"}),"\u3002"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}function p(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},9087:(e,n,o)=>{o.d(n,{R:()=>i,x:()=>l});var t=o(6363);const r={},s=t.createContext(r);function i(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);